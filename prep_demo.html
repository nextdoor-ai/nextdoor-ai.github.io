{% extends "home_header_select.html" %}

{% block content %}
    <!-- CSS style definition -->
    <style type="text/css">
      body { min-width:200px; padding:0; margin:0; font-family:sans-serif; }
      * { box-sizing: border-box; }
      input[type=text] { border:1px solid #cccccc; margin:0.6rem 0; padding:0.2rem 0.4rem; }
      a { text-decoration:none; }

      /* Top panel : #navbar, #toolbar */
      .top_panel { font-size:0.9rem; display:block; background-color:#212121; color:#ffffff; z-index:1001; margin-bottom:1rem;}

      /* Navigation menu bar that appear at the top */
      .menubar { display:inline-block; height:1.8rem; } /* height needed to avoid extra bottom border */
      .menubar a:link { color:#eeeeee; text-decoration:none; }
      .menubar a:visited { color:#eeeeee; text-decoration:none; }
      .menubar ul { display:block; padding:0; margin:0; }
      .menubar li { display:inline; float:left; padding:0.45rem 1rem; }
      .menubar li:hover { background-color:#616161; cursor:default; }

      .menubar li ul { display:none; background-color:#212121; border:1px solid #616161; min-width:10rem; position:absolute; z-index:100; margin:0.4rem -1rem;}
      .menubar li ul li { display:block; float:none; color:#eeeeee; margin:0; padding:0.6rem 1rem; }
      .menubar li ul li:hover { cursor:pointer; }
      .menubar li ul li.submenu_divider { margin:0 0.4rem; padding:0; height:1px; border-bottom:1px solid #424242; }
      .menubar li:hover ul { display:block; }

      /* toolbar containing small icons for tools */
      .toolbar { display:inline-block; margin-left:1rem; }
      .toolbar svg { fill:white; margin: 0.2rem 0.1rem; height:1.2rem;  -moz-user-select:none; -webkit-user-select:none; -ms-user-select:none;}
      .toolbar svg:hover { fill:yellow; cursor:pointer; }
      .toolbar svg:active { fill:white; }
      .toolbar ul { display:inline-block; padding:0.2rem; margin:0; }
      .toolbar li { display:inline; float:left; padding:0rem 0.3rem; border:1px solid white;} /* main menu items */
      .toolbar li:hover { color:red; cursor:pointer; }

      /* Middle panel: containing #image_panel, #leftsidebar */
      .middle_panel { display:table; table-layout:fixed; width:100%; z-index:1; padding:0;}
      #leftsidebar { display:table-cell; z-index:10; vertical-align:top;}
      #display_area { display:table-cell; width:100%; z-index:1; margin:0; padding-left:1em; vertical-align:top; }
      /* layers of canvas */
      #image_panel        { position:relative; outline:none; }
      #image_panel img    { visibility:hidden; opacity:0; position:absolute; top:0px; left:0px; width:100%; height:100%; outline:none; }
      #image_panel canvas { position:absolute; top:0px; left:0px; outline:none;}
      #image_panel .visible { visibility:visible !important; opacity:1 !important; }

      /* image grid view */
      #image_grid_panel { position:relative; margin:0; padding:0; width:100%; }
      #image_grid_panel #image_grid_toolbar { display:block; font-size:small; padding:0.5rem 0;}
      #image_grid_panel #image_grid_toolbar select { font-size:small; }
      #image_grid_panel #image_grid_toolbar .tool { display:inline; margin:0 0.5rem;}
      #image_grid_panel #image_grid_group_panel { font-size:small; }
      #image_grid_panel #image_grid_group_panel select { font-size:small; }
      #image_grid_panel #image_grid_group_panel .image_grid_group_toolbar { display:inline; margin-left: 2rem;}
      #image_grid_panel #image_grid_group_panel .image_grid_group_toolbar select { margin:0 0.2rem; padding:0; font-size:small;}

      #image_grid_panel #image_grid_info { display:block; font-size:small; text-align:center; margin-top:0.5rem; }
      #image_grid_panel #image_grid_info .left { float:left; margin-left:2rem; }
      #image_grid_panel #image_grid_info .right { float:right; margin-right:2rem; }
      #image_grid_panel #image_grid_content { position:relative; overflow:hidden; margin:0; padding:0; outline:none; }
      #image_grid_panel #image_grid_content #image_grid_content_img img { margin:0; padding:0; border:2px solid white;}
      #image_grid_panel #image_grid_content #image_grid_content_img .sel { border-color:white; } /* hidden until used */
      #image_grid_panel #image_grid_content #image_grid_content_img { position:absolute; top:0; left:0; width:100%; height:100%; }
      #image_grid_panel #image_grid_content #image_grid_content_rshape { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; }
      #image_grid_panel #image_grid_content img { float:left; margin:0; }

      #leftsidebar_collapse_panel { display:none; position:relative; z-index:10; vertical-align:top; }
      #leftsidebar_show_button { font-size:large; margin-left:0.1rem; }
      #leftsidebar_show_button:hover { color:red; cursor: pointer; }

      /* Left sidebar accordion */
      button.leftsidebar_accordion { font-size:large; background-color:#f2f2f2; cursor:pointer; padding:0.5em 0.5em; width:100%; text-align:left; border:0; outline:none; }
      button.leftsidebar_accordion:focus { outline: none; }
      button.leftsidebar_accordion.active, button.leftsidebar_accordion:hover { background-color: #e6e6e6; }
      button.leftsidebar_accordion:after { content:'\02795'; color:#4d4d4d; float:right; }
      button.leftsidebar_accordion.active:after { content: '\2796'; }
      .leftsidebar_accordion_panel { display:none; padding:0 0.5em; font-size:small; border-right:2px solid #f2f2f2; border-bottom:2px solid #f2f2f2; }
      .leftsidebar_accordion_panel.show { display:block; }

      /* buttons */
      .button_panel { display:inline-block; width:100%; margin:0.2rem 0; }
      .button_panel .text_button, .text_button { color: #0000ff; padding: 0.2rem 0.2rem; -moz-user-select:none; -webkit-user-select:none; -ms-user-select:none; }
      .button_panel .flush_right { float:right; }
      .button_panel .text_button:hover, .text_button:hover { cursor:pointer; }
      .button_panel .text_button:active, .text_button:active { color: #000000; }
      .button_panel .active { border-bottom:1px solid black; }
      .button_panel .button { display:inline-block; padding:0.35rem 0.5rem; margin:0 0.05rem; cursor:pointer; background-color:#cccccc; border-radius:0.2rem; -moz-user-select:none; -webkit-user-select:none; -ms-user-select:none; }
      .button_panel .button:hover { background-color:black; color:white; }

      /* Attributes properties: name, description, type, ... */
      #attribute_properties { display:table; width:100%; border-collapse:collapse; margin:1rem 0; border:1px solid #cccccc; }
      #attribute_properties .property { display:table-row;}
      #attribute_properties .property span { display:table-cell; padding: 0.2rem 0.4rem; }
      #attribute_properties .property span input { width: 100%; border:1px solid #cccccc; margin: 0;}
      #attribute_properties .property span input:focus { border:1px solid black; }
      #attribute_properties .property span select { width: 100%; border:1px solid #cccccc; margin: 0;}

      /* Attributes options: options for attribute type={checkbox,radio,...} */
      #attribute_options { display:table; width:100%; border-collapse:collapse; margin:1rem 0; border:1px solid #cccccc; table-layout:fixed; }
      #attribute_options .property { display:table-row;}
      #attribute_options .property span { display:table-cell; padding: 0.2rem 0.2rem; font-weight:bold; }
      #attribute_options .property input { display:table-cell; width:94%; border:none; border-bottom:1px solid #cccccc; margin: 0; font-size: 0.8rem;}
      #attribute_options .property input:focus { border-bottom:1px solid #000000; background-color:#f2f2f2; color:#000000; }
      #attribute_options .property span input[type=checkbox] { vertical-align:middle; }
      #attribute_options .property span input[type=radio] { vertical-align:middle; }

      /* overlay panel used to gather user inputs before invoking a function using invoke_with_user_inputs() */
      #user_input_panel { position:fixed; display:none; width:100%; height:100%; top:0; left:0; right:0; bottom:0; background-color: rgba(0,0,0,0.6); z-index:100; }
      #user_input_panel .content { position:fixed; background-color:white; top:50%; left:50%; transform:translate(-50%,-50%);  -webkit-transform: translate(-50%, -50%); -moz-transform: translate(-50%, -50%);  -o-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%); padding:2rem 4rem;}
      #user_input_panel .content .title { font-size:large; font-weight:bold; }
      #user_input_panel .content .user_inputs { display:table; width:100%; border-collapse:collapse;}
      #user_input_panel .content .user_inputs .row { display:table-row; }
      #user_input_panel .content .user_inputs .cell { display:table-cell; padding:1rem 0.5rem; vertical-align:middle; border:1px solid #f2f2f2; }
      #user_input_panel .content .user_confirm { display:table; width:100%; text-align:center; margin:2rem 0;}
      #user_input_panel .content .user_confirm .ok { display:table-cell; width:48%; }
      #user_input_panel .content .user_confirm .cancel { display:table-cell; width:48%; }
      #user_input_panel .content .warning { color:red; }

      /* Attribute editor */
      #annotation_editor_panel { position:fixed; display:none; width:100%; left:0; bottom:0; background-color:white; border-top:2px solid #cccccc; padding:0.2em 1em; overflow:auto; z-index:1001; box-shadow: 0 0 1em #cccccc;}
      #annotation_editor { display:table; margin-bottom:3em; border-collapse:collapse; font-size:inherit; }
      #annotation_editor .row { display:table-row; }
      #annotation_editor .highlight .col { background-color:#e6e6e6;}

      #annotation_editor .col { display:table-cell; padding:0.4em 0.6em; border:1px solid #000000; vertical-align:middle; font-size:inherit; }
      #annotation_editor .header { font-weight:bold; }
      #annotation_editor .id { font-weight:bold; }
      #annotation_editor .col input[type=checkbox] { vertical-align:middle; }
      #annotation_editor .col input[type=radio] { vertical-align:middle; font-size:inherit; }
      #annotation_editor .col label { vertical-align:middle; font-size:inherit; }
      #annotation_editor .col textarea { border:0.1em solid #cccccc; padding:0; margin:0; font-size:inherit; background-color:#ffffff; }
      #annotation_editor .col textarea:focus { border:0.1em dashed #cccccc; }
      #annotation_editor .col span { display:block; }
      #annotation_editor .col horizontal_container { display:inline-block; }

      #annotation_editor .col .img_options { display:inline; }
      #annotation_editor .col .img_options .imrow { display:block; }
      #annotation_editor .col .img_options span { display:inline-block; margin: 0.2rem 0.4rem;}
      #annotation_editor .col .img_options span img { height:4em; }
      #annotation_editor .col .img_options p { margin:0; padding:0; font-size:inherit; }
      #annotation_editor .col .img_options input[type=radio] { display:none; }
      #annotation_editor .col .img_options input[type=radio] + label { display:block; cursor:pointer; text-align:center;}
      #annotation_editor .col .img_options input[type=radio]:checked + label { border: 0.1em solid black; background-color:#cccccc; cursor:default; font-size:inherit; }

      #project_info_panel      { display:table; border-collapse:collapse; font-size:0.8rem; }
      #project_info_panel .row { display:table-row; }
      #project_info_panel .col { display:table-cell; padding:0.4rem 0.1rem; border:none;  }
      #project_info_panel .col input[type=text] { font-size:0.8rem; border:none; border-bottom:1px solid #cccccc; margin: 0; width:100%;}
      #project_info_panel .col input:focus      { border-bottom:1px solid #000000; background-color:#f2f2f2; color:#000000; }

      /* Region shape selection panel inside leftsidebar */
      ul.region_shape          { font-size:xx-large; list-style-type:none; overflow:hidden; padding:0.4em 0; margin:0; }
      ul.region_shape li       { float:left; padding:0 0.2em; fill:#ffffff; stroke:#000000; }
      ul.region_shape li:hover { cursor:pointer; fill:#ffffff; stroke:#ff0000; }
      ul.region_shape .selected { fill:#ffffff; stroke:#ff0000; }

      /* Loaded image list shown in leftsidebar panel */
      #img_fn_list    { font-size:small; overflow:scroll; min-height:10rem; max-height:25rem; }
      #img_fn_list ul { position:relative; line-height:1.3em; margin:0; padding:0; list-style-type:none;}
      #img_fn_list li { white-space:nowrap; display:block; padding:0 0.4rem; }
      #img_fn_list li:hover   { background-color:#d5e5ff; cursor:pointer; }
      #img_fn_list .error     { color:red; }
      #img_fn_list .sel       { border-left:0.2rem solid black !important; font-weight:bold; }
      #img_fn_list .buffered  { border-left:0.2rem solid #cccccc; }

      #message_panel         { display:block; width:100%; position:fixed; bottom:0px; z-index:1000; text-align:center; }
      #message_panel .content { display:inline; margin:auto; background-color:#000000; color:#ffff00; font-size:small; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; line-height:2rem; padding: 0.5rem 2rem;}

      .text_panel    { display:none; margin:auto; font-size:medium; line-height:1.3em; margin: 0; max-width:700px; }
      .text_panel li { margin:1em 0; text-align:left; }
      .text_panel p  { text-align:left; }

      .svg_button:hover { cursor:pointer; }

      /* Loading spinbar */
      .loading_spinbox        { display:inline-block; border:0.4em solid #cccccc; border-radius:50%; border-top:0.4em solid black; border-bottom:0.4em solid black;-webkit-animation:spin 2s linear infinite; animation:spin 2s linear infinite; }
      @-webkit-keyframes spin { 0% { -webkit-transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); } }
      @keyframes spin         { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

      #invisible_file_input { width:0.1px; height:0.1px; opacity:0; overflow:hidden; position:absolute; z-index:-1; }

      .display_none  { display:none !important; }
      .display_block { display:block !important; }

      /* project settings */
      #settings_panel { display:table; font-size:1rem; border-collapse:collapse; width:95%;}
      #settings_panel a { border: 1px solid #f2f2f2; }
      #settings_panel .row { display:table-row; border-bottom:1px solid #f2f2f2;}
      #settings_panel .variable { display:table-cell; width:60%; padding:0.5rem 0.5rem;}
      #settings_panel .variable div { display:block;}
      #settings_panel .variable .name { }
      #settings_panel .variable .desc { font-size:0.7em; color:#808080; padding:0.2rem 0rem;}
      #settings_panel .value { display:table-cell; vertical-align:middle; padding-left:1rem;}

      /* page {about, help, file not found, etc.}*/
      .display_area_content { font-size:0.9rem; width:60%; }
      .display_area_content li { margin: 0.4rem 0; }

      .container_i {
        position: relative;
        width: 49%; /* The size you want */
        cursor: pointer;
      }
      .container_i:after {
        content: "";
        display: block;
        padding-bottom: 100%; /* The padding depends on the width, not on the height, so with a padding-bottom of 100% you will get a square */
      }

      .container_i.active {
        border: 3px dashed #bcbcbc;
      }

      .container_i img {
        position: absolute; /* Take your picture out of the flow */
        top: 20px;
        bottom: 0;
        left: 0;
        right: 0; /* Make the picture taking the size of it's parent */
        width: 100%; /* This if for the object-fit */
        height: auto; /* This if for the object-fit */
        object-fit: cover; /* Equivalent of the background-size: cover; of a background-image */
        object-position: center;
        max-height: 85%;
      }
      .container_i span {
        top: 0px;
        position: absolute;
      }
      .container_i.active span {
        font-weight: bold
      }


    </style>
  <script type="text/javascript" src="../static/js/vendor/dragscroll_ctrl.js?1"></script>
  <script src="../static/js/common/jquery.1.12.0.min.js"></script>
  <script src="../static/js/vendor/jquery.scrollTo.js"></script>

    <input type="hidden" id="menu_urls" value={{menu_urls}}"/>
    <input type="hidden" id="menuId" value="{{ menu_id }}"/>
    <input type="hidden" id="menuInput" value="{{ menu_input }}"/>
    <input type="hidden" id="is_adm" value="{{ is_adm }}"/>
    <input type="hidden" id="menu_url" value="{{ menu_url }}"/>
    <input type="hidden" id="comp_chk" value="{{comp_chk}}"/>
    <input type="hidden" id="hide_cnt" value="{{is_adm}}"/>
    <input type="hidden" id="val_chkbox" value="{{show_chkbox}}"/>
    <!--
        SVG icon set definitions
        Material icons downloaded from https://material.io/icons
      -->
    <svg style="display:none;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs>
        <symbol id="shape_rectangle">
          <title>Rectangular region shape</title>
          <rect width="20" height="12" x="6" y="10" stroke-width="2"/>
        </symbol>
        <symbol id="shape_circle">
          <title>Circular region shape</title>
          <circle r="10" cx="16" cy="16" stroke-width="2"/>
        </symbol>
        <symbol id="shape_ellipse">
          <title>Elliptical region shape</title>
          <ellipse rx="12" ry="8" cx="16" cy="16" stroke-width="2"/>
        </symbol>
        <symbol id="shape_polygon" style="display:none;">
          <title>Polygon region shape</title>
          <path d="M 15.25,2.2372 3.625,11.6122 6,29.9872 l 20.75,-9.625 2.375,-14.75 z" stroke-width="2"/>
        </symbol>
        <symbol id="shape_point">
          <title>Point region shape</title>
          <circle r="3" cx="16" cy="16" stroke-width="2"/>
        </symbol>
        <symbol id="shape_polyline">
          <title>Polyline region shape</title>
          <path d="M 2,12 10,24 18,12 24,18" stroke-width="2"/>
          <circle r="1" cx="2" cy="12" stroke-width="2"/>
          <circle r="1" cx="10" cy="24" stroke-width="2"/>
          <circle r="1" cx="18" cy="12" stroke-width="2"/>
          <circle r="1" cx="24" cy="18" stroke-width="2"/>
        </symbol>
        <!-- Material icons downloaded from https://material.io/icons -->
        <symbol id="icon_settings">
          <path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/>
        </symbol>
        <symbol id="icon_save">
          <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
        </symbol>
        <symbol id="icon_open">
          <path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"/>
        </symbol>
        <symbol id="icon_gridon">
          <path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"/>
        </symbol>
        <symbol id="icon_gridoff">
          <path d="M8 4v1.45l2 2V4h4v4h-3.45l2 2H14v1.45l2 2V10h4v4h-3.45l2 2H20v1.45l2 2V4c0-1.1-.9-2-2-2H4.55l2 2H8zm8 0h4v4h-4V4zM1.27 1.27L0 2.55l2 2V20c0 1.1.9 2 2 2h15.46l2 2 1.27-1.27L1.27 1.27zM10 12.55L11.45 14H10v-1.45zm-6-6L5.45 8H4V6.55zM8 20H4v-4h4v4zm0-6H4v-4h3.45l.55.55V14zm6 6h-4v-4h3.45l.55.54V20zm2 0v-1.46L17.46 20H16z"/>
        </symbol>
        <symbol id="icon_next">
          <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
        </symbol>
        <symbol id="icon_prev">
          <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
        </symbol>
        <symbol id="icon_list">
          <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
        </symbol>
        <symbol id="icon_zoomin">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
        </symbol>
        <symbol id="icon_zoomout">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"/>
        </symbol>
        <symbol id="icon_copy">
          <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
        </symbol>
        <symbol id="icon_paste">
          <path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"/>
        </symbol>
        <symbol id="icon_pasten">
          <path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"/>
          <text x="8" y="18">n</text>
        </symbol>
        <symbol id="icon_pasteundo">
          <path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"/>
          <text x="8" y="18">x</text>
        </symbol>
        <symbol id="icon_selectall">
          <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z"/>
        </symbol>
        <symbol id="icon_close">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </symbol>
        <symbol id="icon_insertcomment">
          <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
        </symbol>
        <symbol id="icon_checkbox">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </symbol>
        <symbol id="icon_fileupload">
          <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
        </symbol>
        <symbol id="icon_filedownload">
          <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
        </symbol>
      </defs>
    </svg>

    <!-- used by invoke_with_user_inputs() to gather user inputs -->
    <div id="user_input_panel"></div>

    <!-- to show status messages -->
    <div id="message_panel" style="display:none;">
      <div id="message_panel_content" class="content"></div>
    </div>

    <!-- spreadsheet like editor for annotations -->
    <div id="annotation_editor_panel">
      <div class="button_panel">
        <span class="button" onclick="edit_region_metadata_in_annotation_editor()" id="button_edit_region_metadata" title="Manual annotations of regions">Region Annotations</span>
        <span class="button" onclick="edit_file_metadata_in_annotation_editor()" id="button_edit_file_metadata" title="Manual annotations of a file">File Annotations</span>
        <span class="button" onclick="edit_file_metadata_in_annotation_editor()" id="button_edit_file_metadata" title="Manual annotations of a file">Save</span>
        <span class="button" style="float:right;margin-right:0.2rem;" onclick="toggle_annotation_editor()" title="Close this window of annotation editor">&times;</span>
        <span class="button" style="float:right;margin-right:0.2rem;" onclick="annotation_editor_increase_panel_height()" title="Increase the height of this panel">&uarr;</span>
        <span class="button" style="float:right;margin-right:0.2rem;" onclick="annotation_editor_decrease_panel_height()" title="Decrease the height of this panel">&darr;</span>
        <span class="button" style="float:right;margin-right:0.2rem;" onclick="annotation_editor_increase_content_size()" title="Increase size of contents in annotation editor">&plus;</span>
        <span class="button" style="float:right;margin-right:0.2rem;" onclick="annotation_editor_decrease_content_size()" title="Decrease size of contents in annotation editor">&minus;</span>
      </div>
      <div style="float:right;margin-right:0.2rem;"><img id="guide_img" style="float:right;width:{{ menu_guide_width }}px" src="{{ guide_url }}" alt="guide image"></div>
      <div id="annotation_editor"></div>
    </div>

    <button id="load_btn" class="btn btn-sm btn-outline-secondary" ><i id="loading_btn" class="fa fa-spinner fa-spin" style="display:none;"></i>학습 이미지 불러오기</button>
    <button id="del_all" class="btn btn-sm btn-outline-secondary" style="display:none;"><i id="loading_btn3" class="fa fa-spinner fa-spin" style="display:none;"></i>전체 이미지 삭제</button>
    <button id="toggle_left" class="btn btn-sm btn-outline-secondary">Left Bar 열기/닫기</button>
    <div id="chk_inf" style="display:none;">
      <label for="inf_include">CCTV 추론데이터</label>&nbsp;&nbsp;<input type="checkbox" id="inf_include"/>
    </div>
    <div class="top_panel" id="ui_top_panel" style="display:none;">
      <!-- menu bar -->
      <div class="menubar">
        <ul>
          {% if is_admin %}
              <li>
                <a href="/">Home</a>
              </li>
          {% endif %}
          <li onclick="show_home_panel()" style="cursor:pointer;">Data
            <ul>
              <li onclick="read_images('ING')" title="작업목록불러오기">작업목록불러오기</li>
              {% if is_admin %}

              <li onclick="pack_via_metadata('db_u_adm')" title="작업목록저장하기" id="chk_sav_btn" style="display:none;">작업목록저장하기</li>
              {% endif %}
                <li onclick="pack_via_metadata('db_i')" title="작업목록저장하기" id="sav_btn">작업목록저장하기</li>
                <li onclick="read_images('COMPLETE')" title="작업완료목록불러오기">작업완료목록불러오기</li>
              {% if is_admin %}
                <li onclick="read_images('CHECKED')" title="확인완료목록 불러오기">확인완료목록 불러오기</li>
              {% endif %}
            </ul>
          </li>
        <li id="menu_li" onclick="" style="cursor:pointer;">Menu
            <input type="hidden" id="menu_data" value="{{ menu_list }}"/>
          </li>
          <li>View
            <ul>
              <li onclick="leftsidebar_toggle()" title="Show or hide the sidebar shown in left hand side">Toggle left sidebar</li>
              <li onclick="toggle_attributes_editor()" title="Show or hide a panel to update file and region attributes">Toggle attributes editor</li>
              <li onclick="toggle_annotation_editor()" title="Show or hide a panel to update annotations corresponding to file and region">Toggle annotation editor</li>
              <li onclick="toggle_img_fn_list_visibility()" title="Show or hide a panel to update annotations corresponding to file and region">Toggle image filename list</li>
              <li class="submenu_divider"></li>
              <li onclick="toggle_region_boundary_visibility()" title="Show or hide the region boundaries">Show/hide region boundaries</li>
              <li onclick="toggle_region_id_visibility()" title="Show or hide the region id labels">Show/hide region labels</li>
            </ul>
          </li>
          {% if userId %}
          <li>User : {{userId}}
            <ul><li><a href="/logout">logout</a></li></ul>
          </li>
          <li>{{ menu_nm }}
          </li>
          {% endif %}

        </ul>
      </div> <!-- end of menubar -->
        <br/>
      <!-- Shortcut toolbar -->
      <div class="toolbar">
        <svg onclick="image_grid_toggle()" id="toolbar_image_grid_toggle" style="margin-left:1rem;" viewbox="0 0 24 24"><use xlink:href="#icon_gridon"></use><title>Switch to Image Grid View</title></svg>
        <svg onclick="zoom_in()" style="margin-left:1rem;" viewbox="0 0 24 24"><use xlink:href="#icon_zoomin"></use><title>Zoom In</title></svg>
        <svg onclick="zoom_out()" viewbox="0 0 24 24"><use xlink:href="#icon_zoomout"></use><title>Zoom Out</title></svg>
        <svg onclick="sel_all_regions()" viewbox="0 0 24 24" style="margin-left:1rem;"><use xlink:href="#icon_selectall"></use><title>Select All Regions</title></svg>
      </div>
      <!-- end of shortcut toolbar -->
      <input type="file" id="invisible_file_input" name="files[]" style="display:none">
    </div> <!-- endof #top_panel -->

    <!-- Middle Panel contains a left-sidebar and image display areas -->
    <div class="middle_panel">
      <!-- this panel contains a button to shows the left side bar -->
      <div id="leftsidebar_collapse_panel">
        <span class="text_button" onclick="leftsidebar_toggle()" title="Show left sidebar">&rtrif;</span>
      </div>

      <div id="leftsidebar">
        <div class="leftsidebar_accordion_panel" style="float:right; border:2px solid #f2f2f2;">
          <span class="text_button" onclick="leftsidebar_decrease_width()" title="Reduce width of this toolbar panel">&larr;</span>
          <span class="text_button" onclick="leftsidebar_increase_width()" title="Increase width of this toolbar panel">&rarr;</span>
          <span class="text_button" onclick="leftsidebar_toggle()" title="Show/hide this toolbar panel">&ltrif;</span>
        </div>
        <button class="leftsidebar_accordion active" style="display:none;">Region Shape</button>
        <div class="leftsidebar_accordion_panel" style="display:none;">
          <ul class="region_shape">
            <li id="region_shape_rect" class="selected" onclick="select_region_shape('rect')" title="Rectangle"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_rectangle"></use></svg></li>
            <li id="region_shape_polygon" onclick="select_region_shape('polygon')" title="Polygon"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_polygon"></use></svg></li>
{#            <li id="region_shape_circle" onclick="select_region_shape('circle')" title="Circle"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_circle"></use></svg></li>#}
{#            <li id="region_shape_ellipse" onclick="select_region_shape('ellipse')" title="Ellipse"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_ellipse"></use></svg></li>#}
{#            <li id="region_shape_point" onclick="select_region_shape('point')" title="Point"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_point"></use></svg></li>#}
{#            <li id="region_shape_polyline" onclick="select_region_shape('polyline')" title="Polyline"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_polyline"></use></svg></li>#}
          </ul>
        </div>

        <div id="img_list" style="overflow:scroll;">
        </div>
        <!-- Project -->
        <button class="leftsidebar_accordion active" id="project_panel_title" style="display:none;">Task</button>
        <div class="leftsidebar_accordion_panel" id="img_fn_list_panel" style="display:none;">
          <div id="project_info_panel" style="display:none;">
            <div class="row">
              <span class="col"><label for="project_name">Name: </label></span>
              <span class="col"><input type="text" value="" onchange="project_on_name_update(this)" id="project_name" title="Project Name"></span>
            </div>
          </div>
          <div id="project_tools_panel">
            <div class="button_panel" style="margin:0.1rem 0;" >
              <select style="width:48%" id="filelist_preset_filters_list" onchange="img_fn_list_onpresetfilter_select()" title="Filter file list using predefined filters">
                <option value="all">All files</option>
                <option value="files_without_region">Show files without regions</option>
                <option value="files_missing_region_annotations">Show files missing region annotations</option>
                <option value="files_missing_file_annotations">Show files missing file annotations</option>
                <option value="files_error_loading">Files that could not be loaded</option>
                <option value="regex">Regular Expression</option>
              </select>
              <input style="width:50%" type="text" placeholder="regular expression" oninput="img_fn_list_onregex()" id="img_fn_list_regex" title="Filter using regular expression">
            </div>
          </div>
          <div id="img_fn_list"></div>
          <p>
          </p>
        </div>
        <label style="display:none;">default value:</label>
          &nbsp;<select id="default_val" style="display:none">

          </select>
        <button id="del_btn" class="btn btn-sm btn-outline-secondary" style="display:none"><i id="loading_btn2" class="fa fa-spinner fa-spin" style="display:none;"></i>이미지 삭제</button>
        <button id="info_btn" type="button" class="btn btn-outline-info" style="display:none;">Info</button>
        <span id="cnt_desc">남은 작업건수 :</span>&nbsp;<span id="left_cnt"></span>

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                ...
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Attributes -->
        <button class="leftsidebar_accordion" id="attributes_editor_panel_title" style="display:none;">Attributes</button>
        <div class="leftsidebar_accordion_panel" id="attributes_editor_panel" style="display:none;">
          <div class="button_panel" style="padding:1rem 0;">
            <span class="text_button" onclick="show_region_attributes_update_panel()" id="button_show_region_attributes" title="Show region attributes">Region Attributes</span>
            <span class="text_button" onclick="show_file_attributes_update_panel()" id="button_show_file_attributes" title="Show file attributes">File Attributes</span>
          </div>
          <div id="attributes_update_panel">
            <div class="button_panel">
              <input style="width:70%" type="text" placeholder="attribute name" id="user_input_attribute_id" value="">
              <span id="button_add_new_attribute" class="button" onclick="add_new_attribute_from_user_input()" title="Add new attribute">&plus;</span>
              <span id="button_del_attribute" class="button" onclick="delete_existing_attribute_with_confirm()" title="Delete existing attribute">&minus;</span>
            </div>
            <div class="button_panel" style="margin:0.1rem 0;" >
              <select style="width:100%" id="attributes_name_list" onchange="update_current_attribute_id(this)" title="List of existing attributes"></select>
            </div>
            <div id="attribute_properties"></div>
            <div id="attribute_options"></div>
            <p style="text-align:center">
              <span class="text_button" title="Show a spreadsheet like editor for all manual annotations" onclick="toggle_annotation_editor()">Toggle Annotation Editor</span>
            </p>
          </div>
        </div>

      </div> <!-- end of leftsidebar -->

      <!-- Main display area: contains image canvas, ... -->
      <div id="display_area">
        <div id="video_list_panel" class="display_area_content" style="width:100%;"></div>
        <div>
          <div id="canvas_div" class="dragscroll" style="width: 70%; float:left; overflow: scroll; cursor: grab; cursor : -o-grab; cursor : -moz-grab; cursor : -webkit-grab;display:none;">
            <div id="image_panel" class="display_area_content">
              <!-- buffer images using <img> element will be added here -->

              <!-- @todo: in future versions, this canvas will be replaced by a <svg> element -->
              <canvas id="region_canvas" width="1" height="1" tabindex="1">Sorry, your browser does not support HTML5 Canvas functionality which is required for this application.</canvas>
            </div>
          </div>
          <div id="right_area" style="width:30%;float:right;">
            <div style="float:right;">
              {% if readble %}
            <button id="stats_btn" class="btn btn-sm btn-outline-secondary" style="display:none;"><i id="loading_btn4" class="fa fa-spinner fa-spin" style="display:none;"></i>전처리 완료</button>
              {% else %}
              <button id="stats_btn_no" class="btn btn-sm btn-outline-secondary" style="display:none;"><i id="loading_btn4" class="fa fa-spinner fa-spin" style="display:none;"></i>완료</button>
              {% endif %}
            </div>
            <br><br>
            <div style="height:45%; ">
                <h5 style="text-align: center;">라벨 분류</h5>
                <div id="label_list" style="overflow:scroll;height: 85%;">
                </div>
            </div>
            <div style="height:50%;">
                <h5 style="text-align: center;">전처리 현황</h5>
                <div id="prep_list" style="overflow:scroll;height: 85%">
                    <table class="table">
                  <tbody id="annotation_editor_panel_2">
                  </tbody>
                </table>
                </div>
            </div>
          </div>
        </div>
          <div style="">
              <label id="lbl_sts"></label>
          </div>
        <div id="image_grid_panel" class="display_area_content" style="display:none;">

          <div id="image_grid_group_panel">
            <span class="tool">Group by&nbsp; <select id="image_grid_toolbar_group_by_select" onchange="image_grid_toolbar_onchange_group_by_select(this)"></select></span>
          </div>

          <div id="image_grid_toolbar">
            <span>Current group contains</span>
            <span id="image_grid_group_by_img_count">0</span>
            <span>images, show</span>

            <span>
              <select id="image_grid_show_image_policy" onchange="image_grid_onchange_show_image_policy(this)">
                <option value="all">all images (paginated)</option>
                <option value="first_mid_last">only first, middle and last image</option>
                <option value="even_indexed">even indexed images (i.e. 0,2,4,...)</option>
                <option value="odd_indexed">odd indexed images (i.e. 1,3,5,...)</option>
                <option value="gap5">images 1, 5, 10, 15,...</option>
                <option value="gap25">images 1, 25, 50, 75, ...</option>
                <option value="gap50">images 1, 50, 100, 150, ...</option>
              </select>
            </span>

            <span style="margin-left:2rem;">Image Size:</span>
            <span class="text_button" title="Increase height of images shown in image grid" onclick="image_grid_image_size_increase()">&plus;</span>
            <span class="text_button" title="Decrease height of images shown in image grid" onclick="image_grid_image_size_decrease()">&minus;</span>
          </div>

          <div id="image_grid_content">
            <div id="image_grid_content_img"></div>
            <svg xmlns:xlink="http://www.w3.org/2000/svg" id="image_grid_content_rshape"></svg>
          </div>

          <div id="image_grid_info">
          </div>
        </div> <!-- end of image grid panel -->

        <div id="settings_panel" class="display_area_content" style="display:none;">
          <h2>Settings</h2>
          <div class="row">
            <div class="variable">
              <div class="name">Project Name</div>
            </div>

            <div class="value">
              <input type="text" id="_via_settings.project.name"/>
            </div>
          </div>

          <div class="row">
            <div class="variable">
              <div class="name">Default Path</div>
              <div class="desc">If all images in your project are saved in a single folder, set the default path to the location of this folder. The VIA application will load images from this folder by default. Note: a default path of <code>"./"</code> indicates that the folder containing <code>labeler.html</code> application file also contains the images in this project. For example: <code>/datasets/VOC2012/JPEGImages/</code> (note the trailing <code>/</code>)</div>
            </div>

            <div class="value">
              <input type="text" id="_via_settings.core.default_filepath" placeholder="/datasets/pascal/voc2012/VOCdevkit/VOC2012/JPEGImages/"/>
            </div>
          </div>

          <div class="row">
            <div class="variable">
              <div class="name">Search Path List</div>
              <div class="desc">If you define multiple paths, all these folders will be searched to find images in this project. We do not recommend this approach as it is computationally expensive to search for images in multiple folders. <ol id="_via_settings.core.filepath"></ol></div>
            </div>

            <div class="value">
              <input type="text" id="settings_input_new_filepath" placeholder="/datasets/pascal/voc2012/VOCdevkit/VOC2012/JPEGImages"/>
            </div>
          </div>

          <div class="row">
            <div class="variable">
              <div class="name">Region Label</div>
              <div class="desc">By default, each region in an image is labelled using the region-id. Here, you can select a more descriptive labelling of regions.</div>
            </div>

            <div class="value">
              <select id="_via_settings.ui.image.region_label"></select>
            </div>
          </div>

          <div class="row">
            <div class="variable">
              <div class="name">Region Label Font</div>
              <div class="desc">Font size and font family for showing region labels.</div>
            </div>

            <div class="value">
              <input id="_via_settings.ui.image.region_label_font" placeholder="12px Arial"/>
            </div>
          </div>

          <div class="row">
            <div class="variable">
              <div class="name">Preload Buffer Size</div>
              <div class="desc">Images are preloaded in buffer to allow smoother navigation of next/prev images. A large buffer size may slow down the overall browser performance. To disable preloading, set buffer size to 0.</div>
            </div>
            <div class="value">
              <input type="text" id="_via_settings.core.buffer_size" />
            </div>
          </div>

          <div class="row" style="border:none;">
            <button onclick="settings_save()" value="save_settings" style="margin-top:2rem">Save</button>
            <button onclick="settings_panel_toggle()" value="cancel_settings" style="margin-left:2rem;">Cancel</button>
          </div>
        </div> <!-- end of settings panel -->

        <div id="page_404" class="display_area_content" style="display:none;">
          <h2>File Not Found</h2>
          <p>Filename: <span style="font-family:Mono;" id="page_404_filename"></span></p>

          <p>We recommend that you update the default path in <span class="text_button" title="Show Project Settings" onclick="settings_panel_toggle()">project settings</span> to the folder which contains this image.</p>

          <p>A temporary fix is to use <span class="text_button" title="Load or Add Images" onclick="sel_local_images()">browser's file selector</span> to manually locate and add this file. We do not recommend this approach because it requires you to repeat this process every time your load this project in the VIA application.</p>
        </div> <!-- end of file not found panel -->

        <div id="page_start_info" class="display_area_content" style="display:none;">
          <ul>
            <li>작업목록을 불러옵니다.</li>
            <li>종료하기 전에 작업목록을 저장합니다.</li>
            <li>작업완료 목록을 불러옵니다.</li>
            <li>작업완료 목록에서 수정사항이 있으면 작업목록을 저장합니다.</li>
            <li>도움말을 보려면 가이드를 참조하세요.</li>
          </ul>
        </div>

        <div id="page_user_guide" class="display_area_content" style="display:none;">
          <h3>User Guide</h3>
          <ul>
            <li><strong>Drawing Regions</strong>:
              <ul>
                <li>Rectangle, Circle and Ellipse
                  <ul>
                    <li>Press left mouse button, drag mouse cursor and release mouse button.</li>
                    <li>To define a point inside an existing region, click inside the region to select it (if not already selected), now press left mouse button, drag and release to draw region inside existing region.</li>
                    <li>To select, click inside the region. If the click point contains multiple regions, then clicking multiple times at that location shuffles selection through those regions.</li>
                  </ul>
                </li>
              </ul>

              <ul>
                <li>Point
                  <ul>
                    <li>Click to define points.</li>
                    <li>To draw a region inside existing region, click inside the region to select it (if not already selected), now click again to define the point.</li>
                    <li>To select, click on (or near) the existing point.</li>
                  </ul>
                </li>
              </ul>


              <ul>
                <li>Polygon and Polyline
                  <ul>
                    <li>Click to define vertices.</li>
                    <li>Press <strong>[Enter]</strong> to finish drawing the region or press [Esc] to cancel.</li>
                    <li>If the first vertex needs to be defined inside an existing region, click inside the region to select it (if not already selected), now click again to define the vertex.</li>
                    <li>To select, click inside the region. If the click point contains multiple regions, then clicking multiple times at that location shuffles selection through those regions.</li>
                  </ul>
                </li>
              </ul>
          </ul>
        </div>
      </div> <!-- end of display_area -->
    </div> <!-- end of middle_panel -->
    <script src="/static/js/vendor/babel.min.js"></script>
    <script src="/static/js/vendor/polyfill.min.js"></script>
    <script type="text/javascript" src="/static/js/admin_view/adm_common.js?{{time}}"></script>
    <script type="text/javascript" src="/static/js/mt_anno_lp_v2.js?{{time}}"></script>
{% endblock %}